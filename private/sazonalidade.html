<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiseTour</title>

    <link rel="shortcut icon" href="../common/assets/logo/logo_padrao.svg" type="image/x-icon">
    <link rel="stylesheet" href="css/sazonalidade.css">
    <script src="https://kit.fontawesome.com/041dbc8823.js" crossorigin="anonymous"></script>
    <script src="/common/js/nav-bar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.highcharts.com/maps/highmaps.js"></script>
    <script src="https://code.highcharts.com/mapdata/countries/br/br-all.js"></script>
    <script src="js/filtros.js"></script>
    <script src="js/sazonalidade.js" defer></script>
</head>

<body id="sazonalidade_body">
    <header id="header" class="header">
        <div id="header_container" class="container">
            <img class="logo" src="/common/assets/logo/logo_cinza_escuro.svg" alt="Logo WiseTour">

            <nav class="menu_container_middle">
                <a id="btnPanoramaGeral" class="opcao" href="index.html">Panorama Geral</a>
                <a id="btnPerfilTurista" class="opcao" href="perfilturista.html">Perfil do Turista</a>
                <a id="btnSazonalidade" class="opcao active" href="sazonalidade.html">Sazonalidade</a>
            </nav>

            <nav class="menu_container_right">
                <!-- <a id="btnAdmin" class="opcao" href="gerenciamento-usuarios.html">
                    <img src="assets/titulo-gerenciamento.svg" alt="">
                </a> -->
                <a class="opcao" href="configuracoes.html">
                    <i class="fa-solid fa-gear"></i>
                </a>
                <a class="opcao" href="gerenciamento-usuario.html">
                    <img src="/common/assets/icon/user_icon.svg">
                </a>
            </nav>
        </div>
    </header>

    <main class="main-grafico">

        <div class="sazonalidade_linha_1">
            <div class="titulo">
                SAZONALIDADE <span id="resumo_filtros"
                    style="display: none; font-size: 20px; color: #555; margin-left: 10px;"></span>
            </div>
            <div class="filtros">
                <div class="descricao" style="font-size: 14px;">
                    Mês:
                </div>
                <select name="mes" id="mes">
                    <option value="">MÊS</option>
                </select>
                <div class="descricao" style="font-size: 14px; margin-left: 20px;">
                    Ano:
                </div>
                <select name="ano" id="ano">
                    <option value="">ANO:</option>
                </select>
                <div class="descricao" style="font-size: 14px; margin-left: 20px;">
                    País:
                </div>
                <select name="pais" id="pais">
                    <option value="">PAÍS:</option>
                </select>
                <i id="funil" class="fa-solid fa-filter funil"></i>
            </div>
        </div>

        <!-- kpis -->

        <div class="coluna-kpis">

            <div class="card">
                <div class="card-amarelo-fundo">
                    <img src="assets/kpi-img-7.svg" alt="">
                </div>
                <div class="card-kpi kpilonga">
                    <h1 id="totalTuristasKPI">6.435,87</h1>
                    <h3>QUANTIDADE TOTAL DE TURISTAS</h3>
                </div>
            </div>




            <div class="card">
                <div class="card-amarelo-fundo">
                    <img src="assets/kpi-img-6.svg" alt="">
                </div>
                <div class="card-kpi kpilonga">
                    <h1 id="variacaoTuristasKPI">+10%</h1>
                    <h3 id="variacaoDescKPI">DE VARIAÇÃO DE TURISTAS EM RELAÇÃO À MAIO DO ANO ANTERIOR</h3>
                </div>
            </div>


            <div class="card">
                <div class="card-amarelo-fundo">
                    <img src="assets/kpi-img-9.svg" alt="">
                </div>
                <div class="card-kpi kpi-maior">
                    <div>
                        <div>
                            <h1>TOP 3</h1>
                            <h3>ESTADOS MAIS VISITADOS</h3>
                        </div>
                        <div class="states-over-image">
                            <span class="state" id="estadoVisitado1">São Paulo</span>
                            <span class="state" id="estadoVisitado2">Rio de Janeiro</span>
                            <span class="state" id="estadoVisitado3">Santa Catarina</span>
                            <img src="assets/top3.svg" alt="">
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!--gráficos-->

        <div class="sazonalidade_linha_2">

            <div class="pico_de_visitas_por_nacionalidades_em_2024">
                <div class="titulo_grafico">
                    PICO DE VISITAS POR NACIONALIDADE
                </div>
                <div class="grafico">
                    <!-- O container para o gráfico e a mensagem de "sem dados" -->
                    <div id="picoVisitasChartContainer" style="position: relative; width: 100%; height: 260px;">
                        <canvas id="picoVisitasChart"></canvas>
                        <!-- Este div será usado para exibir mensagens de carregamento ou "sem dados" -->
                        <div id="picoVisitasNoDataMessage"
                            style="display: none; text-align: center; padding: 20px; position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; background-color: rgba(255, 255, 255, 0.9);">
                            <!-- O texto da mensagem será inserido aqui pelo JavaScript -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="estados_mais_visitados">
                <div class="titulo_grafico">
                    ESTADOS MAIS VISITADOS
                </div>
                <div class="grafico">
                    <div class="grafico-brasil" id="mapaBrasil" style="height: 260px; width: 600px;">
                    </div>

                </div>
            </div>

        </div>
    </main>

    <main class="loading-container">
        <!-- Nuvens decorativas -->
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>

        <!-- Caminho de voo -->
        <div class="flight-path">
            <div class="trail"></div>
        </div>

        <!-- Pássaro voando -->
        <div class="bird-container">
            <div class="bird">
                <svg xmlns="http://www.w3.org/2000/svg" width="371" height="371" viewBox="0 0 371 371" fill="none">
                    <path
                        d="M74.2278 273.229C76.5158 272.69 78.8548 272.972 81.1604 272.777C86.815 272.251 92.3737 271.238 97.8232 269.738C101.506 268.773 105.144 267.532 108.863 266.878C112.069 266.315 115.194 265.459 118.394 264.949C118.937 264.856 119.484 264.831 119.903 264.159C118.619 263.963 117.36 264.037 116.128 264.386C112.404 265.433 108.598 266 104.705 266.097C102.977 266.136 101.3 266.419 99.668 266.951C94.9998 268.471 90.1382 268.658 84.9605 268.641C85.9944 268.064 87.1053 267.704 88.2931 267.561C91.4824 267.122 94.5504 266.243 97.6788 265.571C103.641 264.27 109.594 262.818 115.655 261.993C124.634 260.764 133.411 258.666 142.285 256.973C147.421 255.992 152.618 255.386 157.752 254.32C160.289 253.789 162.966 253.608 165.341 252.686C169.271 251.176 173.446 250.376 177.27 248.638C177.582 248.496 178.116 248.485 178.079 247.993C178.035 247.5 177.529 247.289 177.146 247.206C175.518 246.869 174.377 245.717 173.12 244.789C172.607 244.45 172.204 244.007 171.91 243.466C171.615 242.925 171.468 242.35 171.468 241.739C171.483 241.375 171.397 241.033 171.212 240.71C171.031 240.39 170.776 240.138 170.454 239.962C169.902 239.628 169.408 239.23 168.965 238.76C168.524 238.293 168.159 237.771 167.867 237.201C167.572 236.627 167.369 236.028 167.25 235.404C167.131 234.78 167.104 234.15 167.166 233.524C167.295 231.77 166.155 230.696 165.088 230.053C163.668 229.203 162.645 228.045 162.41 226.721C162.076 224.818 160.98 223.627 159.72 222.46C158.965 221.81 158.357 221.043 157.911 220.153C157.462 219.266 157.208 218.329 157.144 217.348C157.088 216.586 156.74 215.986 156.1 215.553C155.229 214.879 154.332 214.244 153.49 213.54C152.4 212.624 151.505 211.599 151.458 210.057C151.375 208.993 150.91 208.129 150.053 207.475C148.62 206.208 147.55 204.689 146.842 202.924C146.36 201.768 145.71 200.709 144.892 199.753C143.818 198.493 142.918 197.264 142.983 195.441C143.022 194.253 141.792 193.533 140.949 192.771C140.108 192.005 139.622 191.377 140.235 190.326C140.526 189.831 140.235 189.401 139.931 189.025C139.476 188.486 138.969 187.946 138.507 187.407C137.8 186.554 137.648 185.64 138.538 184.908C139.43 184.171 139.104 183.958 138.257 183.616C135.602 182.567 133.923 180.517 132.697 178.022C132.398 177.586 132.316 177.12 132.459 176.619C132.785 175.92 132.378 175.608 131.962 175.184C130.356 173.496 129.019 171.63 127.94 169.576C126.737 167.373 126.908 166.348 128.51 164.631C129.155 163.945 128.567 163.608 128.185 163.25C126.275 161.441 124.565 159.515 123.93 156.872C123.924 156.783 123.854 156.701 123.829 156.605C123.281 154.658 123.389 154.508 125.367 154.511C125.693 154.537 125.986 154.461 126.255 154.289C125.7 154.107 125.197 153.919 124.662 153.769C123.158 153.246 122.946 152.267 124.089 151.149C124.329 150.866 124.586 150.6 124.856 150.346C125.713 149.652 125.816 148.824 124.933 148.182C123.299 146.999 121.585 145.923 119.91 144.801C118.171 143.738 116.672 142.405 115.409 140.805L118.717 140.548C118.452 140.287 118.141 140.146 117.776 140.119C114.325 139.247 112.626 137.331 112.386 133.756C112.333 132.664 111.476 131.579 112.103 130.441C112.141 130.362 111.955 130.101 111.818 129.992C109.297 127.842 107.408 125.213 105.554 122.522C104.965 121.689 104.305 120.942 103.658 120.161C103.084 119.569 102.629 118.895 102.304 118.137C102.181 117.772 102.048 117.358 102.383 117.079C102.718 116.8 103.012 117.065 103.317 117.186C105.046 117.957 106.484 119.178 108.036 120.223C108.819 120.758 109.498 121.487 110.552 121.687C110.73 120.823 110.145 120.315 109.687 119.819C106.592 116.46 103.457 113.126 100.644 109.521C99.2872 107.782 98.0137 105.972 96.7371 104.172C96.3773 103.779 96.2822 103.331 96.4517 102.838L101.62 106.876C102.117 107.265 102.579 107.689 103.102 108.038C103.505 108.301 103.94 108.975 104.419 108.523C104.808 108.163 104.469 107.533 104.226 107.062C103.077 104.83 101.648 102.796 99.9339 100.949L98.8889 99.8333C99.572 99.5643 99.9491 100.001 100.352 100.251C103.871 102.417 106.705 105.39 109.617 108.265C116.026 114.614 122.651 120.72 129.602 126.468C130.053 126.837 130.645 127.659 131.099 127.253C131.713 126.692 131.42 125.767 130.991 125.028C130.502 124.289 129.885 123.692 129.127 123.239C127.053 121.878 125.669 119.798 123.597 118.105C124.082 118.077 124.483 118.248 124.8 118.631C128.623 121.482 131.997 124.834 135.429 128.128C140.862 133.327 146.35 138.47 152.071 143.35C159.05 149.292 166.337 154.833 173.723 160.208C177.241 162.752 180.334 165.832 183.835 168.378C190.537 173.251 196.76 178.697 203.033 184.078C207.076 187.505 210.929 191.13 214.583 194.964C216.376 196.985 217.608 199.293 218.266 201.888C219.096 204.73 220.239 207.451 221.694 210.049C223.497 213.268 225.301 216.5 226.971 219.793C227.612 221.056 228.196 221.042 229.051 220.23C231.234 218.181 234.137 216.972 236.113 214.77C238.444 212.174 241.71 211.349 244.512 209.687C248.009 207.601 251.806 206.125 255.519 204.465C258.342 203.196 261.272 202.296 264.121 201.142C267.116 199.914 269.846 198.008 272.749 196.485C273.537 196.069 273.73 195.142 274.26 194.498C276.082 192.298 278.088 190.287 280.286 188.457C281.387 187.53 282.609 186.689 282.492 184.828C282.449 183.892 283.377 183.114 284.15 182.491C287.103 180.086 289.435 177.074 291.961 174.26C293.36 172.683 294.182 170.509 295.705 168.92C298.717 165.77 302.271 163.265 305.869 160.836C306.575 160.275 307.181 159.621 307.676 158.865C309.67 156.296 312.304 154.461 314.675 152.335C315.518 151.569 316.517 151.214 317.673 151.271C318.104 151.312 318.506 151.24 318.885 151.044C319.258 150.847 319.551 150.564 319.756 150.189C321.447 147.732 323.516 145.564 325.157 143.057C326.404 141.15 327.416 141.205 328.804 143.174C329.278 143.828 329.536 143.338 329.793 143.091C330.976 141.974 332.118 140.791 333.294 139.661C334.174 138.816 335.109 138.058 336.395 137.876C337.265 137.76 337.555 138.137 337.369 138.929C336.609 142.081 335.838 145.222 335.093 148.364C335.047 148.639 334.931 148.878 334.742 149.083C334.556 149.284 334.326 149.417 334.052 149.48C332.885 149.842 332.307 151.608 333.149 152.453C333.764 153.079 333.557 153.542 333.373 154.092C332.717 156.044 332.017 157.953 331.375 159.938C331.154 160.605 331.005 161.292 330.932 161.997C330.877 162.508 330.687 163.418 331.813 162.822C332.145 162.707 332.464 162.74 332.776 162.92C333.204 163.098 333.705 163.382 333.527 162.455C333.46 162.093 333.96 161.996 334.264 161.944C336.099 161.528 337.884 160.968 339.621 160.263C339.9 160.121 340.191 160.075 340.504 160.127C340.82 160.176 341.089 160.319 341.317 160.545C341.89 161.085 341.654 161.712 341.335 162.244C339.972 164.422 338.429 166.461 336.705 168.36C334.322 171.109 331.861 173.795 329.44 176.508C329.191 176.788 328.918 177.064 328.714 177.357C327.858 178.54 327.962 178.784 329.397 178.994C330.832 179.205 331.076 179.729 330.288 181.01C328.739 183.551 327.059 185.903 324.391 187.538C317.897 191.491 311.553 195.721 305.133 199.812C304.28 200.26 303.615 200.893 303.141 201.728C301.66 205.1 298.524 206.913 296.132 209.436C292.676 213.09 287.952 214.773 283.931 217.51C277.647 221.78 271.087 225.733 265.997 231.49C265.872 231.63 265.731 231.76 265.616 231.903C265.185 232.46 264.298 233.022 264.679 233.777C264.991 234.4 265.936 234.248 266.637 234.35C269.432 234.78 272.409 234.497 274.939 236.034C276.868 237.213 278.894 238.463 279.769 240.797C280.065 241.597 280.152 242.414 280.02 243.246C279.762 244.815 279.839 246.381 280.254 247.94C281.848 252.806 281.825 257.566 279.454 262.093C278.746 263.441 277.78 264.567 276.559 265.467C276.278 265.671 275.924 265.989 275.546 265.648C275.168 265.313 275.48 265.037 275.558 264.723C275.921 263.598 276.086 262.438 276.046 261.244C275.979 260.594 275.91 260.281 275.117 260.621C272.37 261.766 269.535 261.618 266.647 260.839C264.526 260.182 262.447 260.241 260.41 261.009C257.822 262.054 255.119 262.536 252.296 262.457C250.375 262.383 248.477 262.184 246.581 262.494C245.796 262.618 245.446 261.758 244.642 261.767C242.999 261.794 241.64 262.499 240.298 263.241C237.124 264.979 233.749 266.216 230.179 266.946C225.68 267.979 221.186 267.841 216.685 266.541C213.571 265.609 210.293 265.46 207.258 264.253C206.856 264.056 206.493 264.102 206.171 264.394C205.167 265.257 203.944 265.16 202.698 265.181C200.684 265.221 198.689 265.644 196.672 265.225C196.494 265.19 196.276 265.29 196.127 265.233C192.885 264.021 189.571 264.76 186.293 264.597C185.657 264.591 185.097 264.373 184.618 263.939C182.988 262.322 181.121 262.75 179.298 263.1C173.436 264.219 167.501 264.956 161.607 265.926C153.369 267.304 144.994 267.653 136.729 268.837C131.97 269.517 127.174 270.012 122.381 270.445C119.109 270.745 115.952 271.748 112.684 271.717C110.069 271.709 107.438 271.903 104.803 271.599C101.708 271.251 98.7516 271.669 95.9233 272.856C94.4144 273.471 92.8251 274.007 91.1105 273.174C90.822 273.037 90.3733 273.223 90.0236 273.282C85.2398 274.02 80.4262 274.151 75.573 273.678C75.0542 273.66 74.5342 273.737 74.2278 273.229Z"
                        fill="#FDD339" />
                </svg>
            </div>
        </div>

        <!-- Texto de carregamento -->
        <div class="loading-text">
            Carregando<span class="dots"></span>
        </div>
    </main>

    <div id="dataHora" style="position: fixed; bottom: 20px; right: 25px; font-family: 'Anybody', sans-serif; 
font-size: 16px; color: #0b0b0b; z-index: 4;"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const mes = document.getElementById('mes');
            const ano = document.getElementById('ano');
            const pais = document.getElementById('pais');
            const resumo = document.getElementById('resumo_filtros');

            function atualizarResumo() {
                const selecionados = [];

                if (mes.value) {
                    selecionados.push(mes.options[mes.selectedIndex].text);
                }
                if (ano.value) {
                    selecionados.push(ano.options[ano.selectedIndex].text);
                }

                // Lógica especial para país
                if (pais.value) {
                    const paisTexto = pais.options[pais.selectedIndex].text;
                    // Se o option selecionado for "PAÍS" (ou similar), mostrar "TODOS OS PAÍSES"
                    if (paisTexto.toLowerCase().includes('país') || paisTexto.toUpperCase() === 'PAÍS') {
                        selecionados.push('TODOS OS PAÍSES');
                    } else {
                        selecionados.push(paisTexto);
                    }
                }

                resumo.style.display = 'inline';

                if (selecionados.length > 0) {
                    resumo.textContent = '• ' + selecionados.join(' • ');
                } else {
                    resumo.textContent = '• TODOS';
                }
            }

            mes.addEventListener('change', atualizarResumo);
            ano.addEventListener('change', atualizarResumo);
            pais.addEventListener('change', atualizarResumo);

            // Exibe "TODOS" por padrão no carregamento
            atualizarResumo();

            function atualizarRelogioBR() {
                const el = document.getElementById("dataHora");
                if (!el) return;

                const agora = new Date();


                const dia = agora.getDate().toString().padStart(2, '0');
                const mes = (agora.getMonth() + 1).toString().padStart(2, '0');
                const ano = agora.getFullYear();

                const hora = agora.getHours().toString().padStart(2, '0');
                const minuto = agora.getMinutes().toString().padStart(2, '0');

                el.textContent = `${dia}/${mes}/${ano} - ${hora}:${minuto}`;
            }

            // Atualizar a cada segundo
            setInterval(atualizarRelogioBR, 1000);
            atualizarRelogioBR();
        });
    </script>



</body>

</html>